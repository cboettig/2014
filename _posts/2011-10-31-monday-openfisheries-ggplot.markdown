---
comments: true
date: 2011-10-31 11:54:19
layout: post
slug: monday-openfisheries-ggplot
title: 'Monday: openfisheries & ggplot'
redirects: [/wordpress/archives/3080, /archives/3080]
categories:
- ecology
---

[Andrew](http://www.andrewdyck.com/) has put together the preliminary API for the openfisheries.org project. I've begun an R package, rfisheries, to interface to the openfisheries project. It would be great to incorporate data from the [RAM Legacy database](http://ramlegacy.marinebiodiversity.ca/ram-legacy-stock-assessment-database/how-to-access-the-ram-legacy-database) and the [seaaroundus.org](http://seaaroundus.org/global/1/101.aspx) project, which may be done at the level of the R package or (perhaps more flexibly) directly through the developing openfisheries API.

Here's a quick proof-of-principle example for Andrew's API:

![](data:image/png;base64,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)


(Code linked from image as usual).



## ggplot2 



Looking into switching my graphics into ggplot. 

For instance, above graph is made by:

```R

dat <- data.frame(year = global$year, global = as.numeric(global$data),
usa=as.numeric(usa$data)) 
dat2 <- melt(dat, id="year")
ggplot(dat2, aes(year, value, fill=variable)) + geom_area() 

```


Note that data has to be in "long" form, accomplished by "melt" function.  

Primary disadvantages are (a) me having to learn a new syntax (b) users of my package having to learn a new syntax. (a) is something I can get over, (b) is something I can largely avoid by keeping plotting routines and data routines separate enough, though it's more a problem in building on other's plotting routines or having other developers extend mine. (I'm sure Hadley would argue that it would in fact be easier, not harder, thanks to the grammar, so there's that side too).  Anyway, non-trivial step when you realize you 're starting off unable to even create a plot.

Collating references as a starting point.  Probably nothing better than the deep end: reading throught ggplot2 book, since getting a handle on the _philosophy_ of the grammar of graphics seems ultimately more useful than getting examples that run.





##  Continued notes 



still writing today's notes... check back
